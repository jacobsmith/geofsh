// Generated by CoffeeScript 1.3.3
(function() {
  var addMarker, geolocError, geolocSuccess, getPosition, googleMap, hideGeoLoc;

  googleMap = function(geolat, geolng) {
    var geoCoords, map, mapOptions;
    geoCoords = new google.maps.LatLng(geolat, geolng);
    mapOptions = {
      zoom: 16,
      center: geoCoords,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("google-map"), mapOptions);
    return addMarker(geoCoords, map, "You are here!");
  };

  addMarker = function(position, map, title) {
    var marker;
    return marker = new google.maps.Marker({
      position: position,
      map: map,
      title: title
    });
  };

  geolocSuccess = function(position) {
    var geolat, geolng;
    geolat = position.coords.latitude;
    geolng = position.coords.longitude;
    if ($("input#latitude")) {
      $("input#latitude").val(geolat);
    }
    if ($("input#longitude")) {
      $("input#longitude").val(geolng);
    }
    if ($("#google-map")) {
      return googleMap(geolat, geolng);
    }
  };

  geolocError = function() {
    hideGeoLoc();
    return "Geolocation Unsuccessful";
  };

  hideGeoLoc = function() {
    return $(".geoloc-hide").parent().hide();
  };

  getPosition = function() {
    if (navigator.geolocation) {
      return navigator.geolocation.getCurrentPosition(geolocSuccess, geolocError);
    } else {
      hideGeoLoc();
      return "Geolocation not supported";
    }
  };

  $(function() {
    return getPosition();
  });

}).call(this);
