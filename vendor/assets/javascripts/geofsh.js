// Generated by CoffeeScript 1.3.3
(function() {
  var addMarker, geolocError, geolocSuccess, googleMap, hideGeoLoc;

  googleMap = function(geolat, geolng) {
    var geoCoords, map, mapOptions;
    if (document.getElementById("google-map")) {
      geoCoords = new google.maps.LatLng(geolat, geolng);
      mapOptions = {
        zoom: 16,
        center: geoCoords,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };
      map = new google.maps.Map(document.getElementById("google-map"), mapOptions);
      return addMarker(geoCoords, map, "You are here!");
    }
  };

  addMarker = function(position, map, title) {
    var marker;
    return marker = new google.maps.Marker({
      position: position,
      map: map,
      title: title
    });
  };

  geolocSuccess = function(position) {
    var geolat, geolng;
    geolat = position.coords.latitude;
    geolng = position.coords.longitude;
    $("input#latitude").val(geolat);
    $("input#longitude").val(geolng);
    return googleMap(geolat, geolng);
  };

  geolocError = function() {
    hideGeoLoc();
    return "Geolocation Unsuccessful";
  };

  hideGeoLoc = function() {
    return $(".geoloc-hide").parent().hide();
  };

  this.getPosition = function() {
    if (navigator.geolocation) {
      return navigator.geolocation.getCurrentPosition(geolocSuccess, geolocError);
    } else {
      hideGeoLoc();
      return "Geolocation not supported";
    }
  };

  $(function() {
    return getPosition();
  });

}).call(this);
